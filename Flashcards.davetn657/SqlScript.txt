CREATE TABLE Stacks(
	StackId INT IDENTITY(1,1) PRIMARY KEY,
	StackName NVARCHAR(50) NOT NULL,
	CreateDate DATETIME2 DEFAULT GETDATE()
);

CREATE TABLE Cards(
	CardId INT IDENTITY(1,1) PRIMARY KEY,
	StackId INT NOT NULL,
	CardQuestion NVARCHAR(100) NOT NULL,
	CardAnswer NVARCHAR(100) NOT NULL,
	LastAppearance DATETIME2 DEFAULT GETDATE(),
	NextAppearance DATETIME2 DEFAULT GETDATE(),
	CREATEDATE DATETIME2 DEFAULT GETDATE(),
	CONSTRAINT FK_Cards_StackId
		FOREIGN KEY (StackId) 
		REFERENCES Stacks(StackId)
		ON DELETE CASCADE
);

CREATE TABLE Sessions(
	SessionId INT IDENTITY(1,1) PRIMARY KEY,
	StackId INT NOT NULL,
	SessionName NVARCHAR(50) NOT NULL,
	CreateDate DATETIME2 DEFAULT GETDATE(),
	CONSTRAINT FK_Session_StackId
		FOREIGN KEY (StackId)
		REFERENCES Stacks(StackId)
		ON DELETE CASCADE
);

CREATE TABLE Scores(
	ScoreId INT IDENTITY(1,1) PRIMARY KEY,
	SessionId INT NOT NULL,
	Score INT DEFAULT 0,
	CreateDate DATETIME2 DEFAULT GETDATE(),
	CONSTRAINT FK_Scores_SessionId
		FOREIGN KEY (SessionId)
		REFERENCES Sessions(SessionId)
		ON DELETE CASCADE
);